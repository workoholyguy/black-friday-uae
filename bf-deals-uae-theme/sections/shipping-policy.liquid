<section class="shipping-policy">
  <div class="shipping-policy__inner">
    {% liquid
      assign policy_title = blank
      assign policy_body = blank
      assign has_policy_body = false
      assign updated_date = 'now' | date: '%B %d, %Y'

      if shop.shipping_policy != blank
        assign policy_title = shop.shipping_policy.title
        assign policy_body = shop.shipping_policy.body
      endif

      if policy_body != blank
        assign has_policy_body = true
      endif

      if has_policy_body == false
        if page != blank
          if page.content != blank
            assign policy_title = page.title
            assign policy_body = page.content
            assign has_policy_body = true
          endif
        endif
      endif

      if policy_title == blank
        if page != blank
          if page.title != blank
            assign policy_title = page.title
          endif
        endif
      endif

      if policy_title == blank
        assign policy_title = 'shipping_policy.title_fallback' | t
      endif
    %}

    {% if policy_title != blank %}
      <h1>{{ policy_title | escape }}</h1>
    {% endif %}

    {% if has_policy_body %}
      <div class="shipping-policy__content rte">
        {{ policy_body }}
      </div>
    {% else %}
      <p class="shipping-policy__meta">{{ 'shipping_policy.updated' | t: date: updated_date }}</p>

      <div class="shipping-policy__lead">
        <p class="shipping-policy__intro">{{ 'shipping_policy.intro_html' | t: shop_name: shop.name }}</p>
      </div>

      <div class="shipping-policy__summary" role="note" aria-label="{{ 'shipping_policy.summary_aria' | t | escape }}">
        <h2 class="shipping-policy__summary-title">{{ 'shipping_policy.summary_title' | t }}</h2>
        <ul class="shipping-policy__summary-list">
          <li>{{ 'shipping_policy.summary_region' | t: region: section.settings.shipping_region }}</li>
          <li>
            {% if section.settings.free_shipping %}
              {{ 'shipping_policy.summary_free_shipping' | t }}
            {% else %}
              {{ 'shipping_policy.summary_paid_shipping' | t }}
            {% endif %}
          </li>
          <li>
            {{ 'shipping_policy.summary_tracking' | t }}
          </li>
          <li>
            {{ 'shipping_policy.summary_processing' | t: min_days: section.settings.handling_min_days, max_days: section.settings.handling_max_days }}
          </li>
        </ul>
      </div>

      <div class="shipping-policy__accordions">
        <details class="shipping-policy__details" open>
          <summary class="shipping-policy__summary-row">
            <span>{{ 'shipping_policy.section_order_confirmation_title' | t }}</span>
          </summary>
          <div class="shipping-policy__details-body">
            <p>{{ 'shipping_policy.order_confirmation_1' | t }}</p>
            <p>{{ 'shipping_policy.order_confirmation_2' | t }}</p>
          </div>
        </details>

        <details class="shipping-policy__details">
          <summary class="shipping-policy__summary-row">
            <span>{{ 'shipping_policy.section_tracking_title' | t }}</span>
          </summary>
          <div class="shipping-policy__details-body">
            <p>{{ 'shipping_policy.tracking_1' | t }}</p>
          </div>
        </details>

        <details class="shipping-policy__details">
          <summary class="shipping-policy__summary-row">
            <span>{{ 'shipping_policy.section_charges_title' | t }}</span>
          </summary>
          <div class="shipping-policy__details-body">
            {% if section.settings.free_shipping %}
              <p>{{ 'shipping_policy.charges_free' | t: region: section.settings.shipping_region }}</p>
            {% else %}
              <p>{{ 'shipping_policy.charges_paid' | t }}</p>
            {% endif %}
          </div>
        </details>

        <details class="shipping-policy__details">
          <summary class="shipping-policy__summary-row">
            <span>{{ 'shipping_policy.section_processing_title' | t }}</span>
          </summary>
          <div class="shipping-policy__details-body">
            <ul>
              <li>{{ 'shipping_policy.processing_handling' | t: min_days: section.settings.handling_min_days, max_days: section.settings.handling_max_days }}</li>
              <li>{{ 'shipping_policy.processing_transit' | t: min_days: section.settings.transit_min_days, max_days: section.settings.transit_max_days }}</li>
              <li>{{ 'shipping_policy.processing_cutoff' | t: time: section.settings.cutoff_time }}</li>
              <li>{{ 'shipping_policy.processing_cutoff_note' | t: time: section.settings.cutoff_time }}</li>
            </ul>
          </div>
        </details>

        <details class="shipping-policy__details">
          <summary class="shipping-policy__summary-row">
            <span>{{ 'shipping_policy.section_acceptance_title' | t }}</span>
          </summary>
          <div class="shipping-policy__details-body">
            <p>{{ 'shipping_policy.acceptance_1' | t }}</p>
            <p>{{ 'shipping_policy.acceptance_2' | t }}</p>
          </div>
        </details>

        <details class="shipping-policy__details">
          <summary class="shipping-policy__summary-row">
            <span>{{ 'shipping_policy.section_customs_title' | t }}</span>
          </summary>
          <div class="shipping-policy__details-body">
            <p>{{ 'shipping_policy.customs_1' | t }}</p>
          </div>
        </details>

        <details class="shipping-policy__details">
          <summary class="shipping-policy__summary-row">
            <span>{{ 'shipping_policy.section_contact_title' | t }}</span>
          </summary>
          <div class="shipping-policy__details-body">
            <p>{{ 'shipping_policy.contact_intro' | t }}</p>

            <ul class="shipping-policy__contact">
              {% if section.settings.support_email != blank %}
                <li>
                  <span class="shipping-policy__contact-label">{{ 'shipping_policy.contact_email_label' | t }}</span>
                  <a href="mailto:{{ section.settings.support_email | escape }}">{{ section.settings.support_email | escape }}</a>
                </li>
              {% endif %}

              {% if section.settings.support_phone != blank %}
                <li>
                  <span class="shipping-policy__contact-label">{{ 'shipping_policy.contact_phone_label' | t }}</span>
                  <a href="tel:{{ section.settings.support_phone | escape }}">{{ section.settings.support_phone | escape }}</a>
                </li>
              {% endif %}

              {% if section.settings.support_address != blank %}
                <li>
                  <span class="shipping-policy__contact-label">{{ 'shipping_policy.contact_address_label' | t }}</span>
                  <span>{{ section.settings.support_address | escape }}</span>
                </li>
              {% endif %}
            </ul>

            {% if section.settings.support_email == blank and section.settings.support_phone == blank and section.settings.support_address == blank %}
              <p class="shipping-policy__note">{{ 'shipping_policy.contact_fallback' | t }}</p>
            {% endif %}
          </div>
        </details>
      </div>
    {% endif %}
  </div>
</section>

{% stylesheet %}
  .shipping-policy__inner {
    display: grid;
    grid-template-columns: var(--content-grid);
    padding-block: clamp(1.5rem, 4vw, 3rem);
  }
  .shipping-policy__inner > * { grid-column: 2; }
  .shipping-policy h1 { font-size: clamp(1.6rem, 4vw, 2.2rem); margin: 0 0 .75rem 0; color: var(--color-foreground); }

  .shipping-policy__meta {
    margin: 0 0 1rem 0;
    color: color-mix(in oklab, var(--color-foreground) 70%, transparent);
    font-size: .95rem;
  }
  .shipping-policy__lead {
    margin-bottom: 1.25rem;
    max-width: 75ch;
  }
  .shipping-policy__intro {
    margin: 0;
    font-size: 1.05rem;
    line-height: 1.6;
    color: var(--color-foreground);
  }
  .shipping-policy__summary {
    border: 1px solid color-mix(in oklab, var(--color-foreground) 14%, transparent);
    background: color-mix(in oklab, var(--color-foreground) 4%, transparent);
    border-radius: 16px;
    padding: 1rem;
    margin: 0 0 1.25rem 0;
  }
  .shipping-policy__summary-title {
    margin: 0 0 .75rem 0;
    font-size: 1.05rem;
    letter-spacing: .01em;
    color: var(--color-foreground);
  }
  .shipping-policy__summary-list {
    margin: 0;
    padding-left: 1.1rem;
    display: grid;
    gap: .5rem;
  }
  .shipping-policy__details {
    border: 1px solid color-mix(in oklab, var(--color-foreground) 14%, transparent);
    border-radius: 16px;
    overflow: clip;
    background: color-mix(in oklab, var(--color-foreground) 2%, transparent);
  }
  .shipping-policy__details + .shipping-policy__details {
    margin-top: .75rem;
  }
  .shipping-policy__summary-row {
    list-style: none;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
    padding: .95rem 1rem;
    cursor: pointer;
    user-select: none;
    color: var(--color-foreground);
    font-weight: 650;
  }
  .shipping-policy__summary-row::-webkit-details-marker {
    display: none;
  }
  .shipping-policy__summary-row::after {
    content: '';
    width: 12px;
    height: 12px;
    border-right: 2px solid color-mix(in oklab, var(--color-foreground) 70%, transparent);
    border-bottom: 2px solid color-mix(in oklab, var(--color-foreground) 70%, transparent);
    transform: rotate(45deg);
    transition: transform 160ms ease;
    flex: none;
  }
  .shipping-policy__details[open] .shipping-policy__summary-row::after {
    transform: rotate(-135deg);
  }
  .shipping-policy__details-body {
    padding: 0 1rem 1rem 1rem;
    color: var(--color-foreground);
  }
  .shipping-policy__details-body p {
    margin: 0 0 .75rem 0;
    line-height: 1.6;
  }
  .shipping-policy__details-body ul {
    margin: 0;
    padding-left: 1.2rem;
    display: grid;
    gap: .5rem;
  }
  .shipping-policy__details-body li {
    line-height: 1.6;
  }
  .shipping-policy__note {
    margin: .85rem 0 0 0;
    padding: .75rem .9rem;
    border-radius: 14px;
    border: 1px dashed color-mix(in oklab, var(--color-foreground) 20%, transparent);
    background: color-mix(in oklab, var(--color-foreground) 3%, transparent);
    color: color-mix(in oklab, var(--color-foreground) 85%, transparent);
  }
  .shipping-policy__contact {
    margin-top: .75rem;
    padding-left: 0;
    list-style: none;
    display: grid;
    gap: .5rem;
  }
  .shipping-policy__contact li {
    display: grid;
    grid-template-columns: minmax(10ch, 18ch) 1fr;
    gap: .5rem 1rem;
    align-items: baseline;
  }
  .shipping-policy__contact-label {
    color: color-mix(in oklab, var(--color-foreground) 70%, transparent);
    font-weight: 600;
  }
  .shipping-policy a {
    color: var(--color-link);
    text-underline-offset: 3px;
  }
  .shipping-policy a:hover {
    text-decoration-thickness: 2px;
  }

  @media (prefers-reduced-motion: reduce) {
    .shipping-policy__summary-row::after { transition: none; }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:sections.shipping_policy.name",
  "settings": [
    {
      "type": "header",
      "content": "t:sections.shipping_policy.settings_header_shipping"
    },
    {
      "type": "text",
      "id": "shipping_region",
      "label": "t:sections.shipping_policy.shipping_region_label",
      "default": "United Arab Emirates"
    },
    {
      "type": "checkbox",
      "id": "free_shipping",
      "label": "t:sections.shipping_policy.free_shipping_label",
      "default": true
    },
    {
      "type": "range",
      "id": "handling_min_days",
      "label": "t:sections.shipping_policy.handling_min_days_label",
      "min": 0,
      "max": 7,
      "step": 1,
      "unit": "d",
      "default": 1
    },
    {
      "type": "range",
      "id": "handling_max_days",
      "label": "t:sections.shipping_policy.handling_max_days_label",
      "min": 1,
      "max": 14,
      "step": 1,
      "unit": "d",
      "default": 2
    },
    {
      "type": "range",
      "id": "transit_min_days",
      "label": "t:sections.shipping_policy.transit_min_days_label",
      "min": 0,
      "max": 14,
      "step": 1,
      "unit": "d",
      "default": 1
    },
    {
      "type": "range",
      "id": "transit_max_days",
      "label": "t:sections.shipping_policy.transit_max_days_label",
      "min": 1,
      "max": 30,
      "step": 1,
      "unit": "d",
      "default": 3
    },
    {
      "type": "text",
      "id": "cutoff_time",
      "label": "t:sections.shipping_policy.cutoff_time_label",
      "default": "5:00 PM"
    },
    {
      "type": "header",
      "content": "t:sections.shipping_policy.settings_header_contact"
    },
    {
      "type": "text",
      "id": "support_email",
      "label": "t:sections.shipping_policy.support_email_label",
      "default": "info@blackfridaydeals-uae.com"
    },
    {
      "type": "text",
      "id": "support_phone",
      "label": "t:sections.shipping_policy.support_phone_label"
    },
    {
      "type": "text",
      "id": "support_address",
      "label": "t:sections.shipping_policy.support_address_label"
    }
  ],
  "presets": [
    { "name": "t:sections.shipping_policy.preset" }
  ]
}
{% endschema %}


